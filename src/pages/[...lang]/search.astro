---
import { allLocales } from '@/config'
import { getLangFromLocale, getLangRouteParam } from '@/i18n/lang'
import { ui } from '@/i18n/ui'
import Layout from '@/layouts/Layout.astro'

export async function getStaticPaths() {
  return allLocales.map(lang => ({
    params: { lang: getLangRouteParam(lang) },
  }))
}

const currentLang = getLangFromLocale(Astro.currentLocale)
const currentUI = ui[currentLang as keyof typeof ui] ?? {}
---

<Layout>
  <section class="search-redirect" data-pagefind-ignore>
    <p>{currentUI.search ?? 'Search'}</p>
  </section>

  <script is:inline data-astro-rerun>
    (function () {
      const open = () => document.dispatchEvent(new CustomEvent('search-modal-open'))

      document.addEventListener('astro:page-load', open)
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', open)
      }
      else {
        open()
      }
    })()
  </script>

  <style is:global>
    .search-redirect {
      min-height: 40vh;
      display: grid;
      place-items: center;
      color: oklch(var(--un-preset-theme-colors-secondary) / 0.6);
      letter-spacing: 0.08em;
    }
  </style>
</Layout>
